# Changelog
All notable changes to this project will be documented in this file.

## [Unreleased]
- Исправление ошибки с дедубликацией сотрудников.
- Более подробные ошибки при загрузке из 1С ЗУП для диагностики проблем на стороне 1С.

## [1.21] - 2022-01-28
- Значение аттрибута организация сделано настраиваемым через конфигурационный файл.
- Исправлен баг из-за которого наименования подразделений с разным количеством пробелов считались одинаковыми в процедуре расчета перемещения пользователей.
- Исправлено: перед первыми пробелами при отображении DN выводился слеш.
- Исправлено: при наличии нескольких последовательных пробелов в данных изменения выводился только один пробел.

## [1.20] - 2022-01-27
- Исправлен поиск "0".
- Из неймспейса команд исключены Author команды.
- Обновление сокращений подразделений.
- Переход на загрузку из 1C ЗУП.
- Исправлен баг в загрузке 1С: загрузка из интервального регистра (ЗУП версии 3).

## [1.19] - 2021-06-18
- Взаимоблокировка заданий через named guard locks.
- Рефакторинг управления заданиями. Больше не используется таблица states.
- Исправлен баг с тем, что запуск заданий не всегда сразу отображается в gui, прогрессбар отображается после перезагрузки страницы.

## [1.18] - 2021-06-17
- Синхронизация с 1С ЗУП.
- Исправлен масштаб при печати инструкции пользователя.
- Доработка отображения прогресса синхронизации.
- Рефакторинг задания синхронизации.

## [1.17] - 2021-05-18
- Вынос сетевой загрузки данных из cron процесса, процесс больше не работает с сетью и не пишет в tmp volume.
- Снова работают билды в облаке (на alpine 3.13 какие-то проблемы с тестами DateTime::Locale почему-то только в облаке).
- Своя функция вместо огромных модулей DateTime.
- Откат #305a4cf, исправлено в upstream.

## [1.16] - 2021-05-14
- Проверка на включенные архивные учетные записи в DISMISSED, формирование изменений на их отключение.
- Обновление сокращений подразделений.
- Рефакторинг Changelog.

## [1.15] - 2021-03-12
- Инструкция нового пользователя корпоративной сети.
- Обновление js-библиотек.
- Исправлены баги с валидацией.
- Оптимизации и улучшения.

## [1.14] - 2021-02-25
- Использование migrations для БД.
- Переход на prefork в контейнерах.
- Ограничение макс. одно задание на процесс worker-а.
- Оптимизации и улучшения.

## [1.13] - 2020-05-15
- Решена проблема с hypnotoad hot deployment.

## [1.10] - 2020-03-10
- Встроенный планировщик загрузок.

## [1.9] - 2019-12-20
- Временные volume больше не создаются в контейнерах worker и cron.
- Корректное логгирование запуска и остановки задач в worker.

## [1.8] - 2019-12-19
- Переход на виртуализацию docker.

## [1.7] - 2019-10-25
- Разрешено создание записей сотрудников с одинаковыми ФИО находящихся в разных подразделениях.
- Изменены алгоритмы синхронизации учётных записей для сотрудников с одинаковыми ФИО.
- Не поддерживается перемещение сотрудников с одинаковыми ФИО между подразделениями. Перемещение должно производиться вручную.
- Реализован постраничный (Paged) поиск в LDAP при синхронизации удалений работников из групп почтового справочника.

## [1.6] - 2019-10-22
- Автоматическое применение изменений создания и удаления подразделений в соответствии с их уровнем иерархии. Теперь не нужно их сортировать вручную.
- Улучшение UI.

## [1.5] - 2019-09-27
- Досрочное завершение задания синхронизации изменений в случае если имеются изменения создания подразделений и групп почтового справочника - для экономии ресурсов. Все равно сначала необходимо создать подразделения, а затем перезапустить задание синхронизации.

## [1.4] - 2019-09-25
- Смена порядка применения изменений для профилактики ошибок удаления учётных записей из отдельных групп почтового справочника.

## [1.3] - 2019-08-23
- Реализовано использование камеры устройства для съемки фото сотрудников.
- Смена порядка выполнения синхронизаций для профилактики ошибок удаления учётных записей из отдельных групп почтового справочника.

## [1.2] - 2019-08-22
- Загрузка и просмотр фотографий сотрудников.
- Перезагрузка раз в сутки кэша пользователей для того, чтобы избежать необходимости перезапуска серверной части программы при смене ролей пользователей.
- Повторное исправление ошибки удаления учётных записей из отдельных групп почтового справочника.
- Оптимизация пользовательского интерфейса.

## [1.1] - 2019-08-19
- Исправлена ошибка удаления некоторых учётных записей из групп почтового справочника.

## [1.0] - 2019-08-19
- Выпуск окончательной версии 1.0.
- Доработана процедура синхронизации групп почтового справочника для очистки сотрудников - неактуальных членов почтовых групп.
- Автоматическая очистка кеша ресолвера операторов раз в сутки, чтобы не требовалось периодически перезапускать бэкенд.
- Доработки пользовательского интерфейса.

## [0.25] - 2019-08-16
- Синхронизация - Удаление OU подразделений.
- Отображение логинов пользователей в форме редактирования email-ов.
- Улучшенная обработка ошибок доступа к LDAP и БД.
- Ресолвер ФИО операторов по логинам с кешированием для отображения полных ФИО в списке логов и т.п.
- Оптимизация кода.

## [0.24] - 2019-08-13
- Синхронизация - Удаление групп почтового справочника.
- Отображение логина пользователя в изменении удаления пользователя.
- Workaround по части загрузки свежих css файлов при обновлении программы.
- Базовая подсказка по программе с описанием основных функций.

## [0.23] - 2019-08-09
- Синхронизация - Удаление пользователей.
- Отдельные доработки интеллекта именования групп почтового справочника.
- Оптимизация пользовательского интерфейса по части использования с мобильных устройств.
- Поправлены базы поисков в формах ввода данных.

## [0.22] - 2019-08-10
- Обработка имен групп почтового справочника искусственным интеллектом, для того чтобы они лучше выглядели в справочнике корпоративной почты.
- Проведение порождаемых им изменений групп почтового справочника.

## [0.21] - 2019-08-05
- Синхронизация - Перемещение пользователей.
- Исправление отображения изменений.
- Списки фильтров по типам изменений отсортированы по логическому порядку применения изменений.

## [0.20] - 2019-08-02
- Повторное улучшение стабильности разбора ФИО.
- Формы ввода телефонов, сотовых телефонов расширены для возможности ввода нескольких номеров на одного человека.
- Оптимизация, улучшенная обработка ошибок поиска в ldap в формах ввода.
- Информирование о новой версии программы.

## [0.19] - 2019-07-30
- Исправление ошибки при определении членства в группе почтового справочника.
- Улучшен разбор ФИО при постпроцессинге шаблона, ликвидирована возможность появления учетных записей с пробелом в конце.
- Улучшено отображение прогресса операции.
- Улучшена обработка ошибок поиска в Active directory.

## [0.18] - 2019-07-29
- Улучшение стабильности алгоритма формирования логинов.
- Оптимизация использования аттрибута distinguishedName при синхронизации.
- Включение пользователей в группы почтового справочника при создании и модификации учётных записей.
- FIXBACKPORT: Исправление ошибки при определении членства в группе почтового справочника.

## [0.17] - 2019-07-26
- Синхронизация - Создание пользователей.
- Оптимизация дублирующегося кода.
- Отображение полного подразделения и отключенных пользователей в форме просмотра имен компьютеров.

## [0.16] - 2019-07-25
- Работа над ошибками созданными в предыдущей версии.
- Улучшение отображения прогресса для всех процессов.

## [0.15] - 2019-07-24
- Создание/синхронизация OU подразделений.
- Синхронизация табельных номеров работников.
- Исправление мелких ошибок и недоработок.
- Исправлена сортировка списка изменений при утверждении.
- Базовые DN персонала и почтовых групп вынесены в файл конфигурации.
- Автоперезапуск подсистемы выполнения задач в случае сбоя.

## [0.14] - 2019-07-23
- Оптимизация лога применений изменений.
- Рефакторинг подзадач синхронизации.
- Команда зачистки отметок выполняющихся задач.
- Улучшено отображение прогрессбаров задач.

## [0.13] - 2019-07-22
- Отображение дат изменено на "время дата".
- Исправлена сортировка архива применённых изменений.
- Исправлено падение процесса синхронизации аттрибутов при неполном списке аттрибутов.
- Исправлено падение процесса постобработки при отсутствии у работники имени или отчества.
- Добавлена кнопка запуска применения изменений на экран просмотра и утверждения.
- Создание/синхронизация групп почтового справочника Корпоративной почты.
- Оптимизации процедур принятия изменений.
- Улучшено отображение лога операций.

## [0.12] - 2019-07-08
Новый формат хранения "плоских" подразделений и соответствующие изменения в задании предобработки.

## [0.11] - 2019-07-05
- Убраны блокировки таблиц уровня сервера.
- Добавлена таблица для плоской записи подразделений.
- Доработана задача загрузки и предварительной обработки.
- Рефакторинг по подзадачам синхронизации.
- Улучшение лога ошибок заданий командной строки.

## [0.10] - 2019-06-25
- Исправлена ошибка загрузки шаблона Persons.
- Команды запуска задач с командной строки.
- Команда загрузки шаблона с SMB сервера и запуска препроцессинга.
- Периодический запуск загрузок шаблонов с SMB сервера для systemd и cron.
- Учёт изменений в программе.
- Улучшение работы программы в тестовых режимах.

